# 模板开发流程


**本节的模板模式的使用主要在于对领域模块 lottery-domain.strategy 中 draw 抽奖包下的类处理**

* DrawConfig：配置抽奖策略，SingleRateRandomDrawAlgorithm、EntiretyRateRandomDrawAlgorithm

* DrawStrategySupport：提供抽奖策略数据支持，便于查询策略配置、奖品信息。通过这样的方式隔离职责。
* AbstractDrawBase：抽象类定义模板方法流程，在抽象类的 doDrawExec 方法中，处理整个抽奖流程，并提供在流程中需要使用到的抽象方法，由 DrawExecImpl 服务逻辑中做具体实现。

## DrawConfig

**抽奖策略的配置**

* DrawConfig 针对抽奖策略的配置  将两种抽奖算法 送进容器中去

```java
package cn.itedus.lottery.domain.strategy.service.draw;

import cn.itedus.lottery.domain.strategy.service.algorithm.IDrawAlgorithm;

import javax.annotation.PostConstruct;
import javax.annotation.Resource;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

// 抽奖策略的配置 将两种抽奖算法 放进容器中
public class DrawConfig {

    @Resource
    private IDrawAlgorithm defaultRateRandomDrawAlgorithm;// 注入抽奖算法

    @Resource
    private IDrawAlgorithm singleRateRandomDrawAlgorithm;

    // 将两种算法放进容器
    protected static Map<Integer, IDrawAlgorithm> drawAlgorithmMap = new ConcurrentHashMap<>();


    @PostConstruct
    public void init() {
        drawAlgorithmMap.put(1, defaultRateRandomDrawAlgorithm);
        drawAlgorithmMap.put(2, singleRateRandomDrawAlgorithm);
    }

}


```


## DrawStrategySupport 

* 继承DrawConfig 注入mapper 接口 从数据库中查询抽奖策略


