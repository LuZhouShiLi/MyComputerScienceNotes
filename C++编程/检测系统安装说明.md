# 监测系统安装说明

## 安装julia

* 安装julia1.7 一路next，记得安装的位置
* 添加环境变量：

添加用户变量：

变量名：JULIA_PKG_SERVER
变量值：julia安装路径 不要到bin

![图 1](../images/356c7d073a9019f1901ded6f62fe819b05c9789f82bd5d19b415d3500e6541ae.png)  

添加系统变量path:需要到bin目录
![图 2](../images/880dab4062eb1bb39cb5e84d01b8da1e092b93bdc7ff3e86fa5f31bb28c3645d.png)  

打开cmnd命令行，输入julia，看是否安装成功

![图 3](../images/eec9a2a184c371af8beba7316c7bf5e1c77cf357487c107c59c8c2823b3a32e5.png)  


## 安装julia需要的库

* 将installpackage.jl文件放到桌面，直接拖到julia程序打开，系统自动进行安装扩展库

![图 4](../images/3df4445c3847aad8bde5f8413b10730c64d7c8a806b803de1af1127a6e1dfd81.png)  

安装完成之后，打开julia,输入using Pkg, 输入 Pkg.status()，查看已经安装的库文件

![图 5](../images/3acc50ae790560d8b6017526b3a97627b186afc6942a7e5c7eb820b9d78b76fb.png)  


## eqmonitor配置

* 将bin文件夹放到一个合适的位置,比如D盘新建一个文件夹

![图 7](../images/2f8d5d82926c76982d0d106d63a46b246d24ced6ef3be1e8547a662aed7063bd.png)  


* 点击MRMS.exe

![图 8](../images/d487de12abd1577bbd3f7f50edac28a26265a92e44a77bf72732ed7a7d4e21fa.png)  

* 新建一个工区

![图 9](../images/0dd28181bc0079949cc31a568434edc140274afee344e48b529fff3984bbe0ab.png)  

![图 10](../images/5ab3d70c5d8af02952e3c4d59a32717c567a024a8174f323edbfb2263a9b76e5.png)  

将工区文件放到合适位置
![图 11](../images/a20e9ea457819084659411a7ffb0ee65e575adac703eb1a90d051a3b7cda15c2.png)  

* 使用eqmonitor设置地震数据下载位置

点击工具栏第一个按钮
![图 12](../images/3eeeaa7e406c1e62e8b3a6a771d8a64776c305f29b07a0157ee591537d701839.png)  

将存储路径设置成新建的TEST1工区下面的monitor文件夹，不要到seg目录
![图 13](../images/28572acf6a7b8592c88be348a5ed50cea958c8dab245f67b940b55be254495cc.png)  

* 点击制作台站坐标按钮

![图 14](../images/1f7195c9583f013a794651bd28d8d21e3d188b07996cc76fe71119cf76615c05.png)  

![图 15](../images/3c7edef1ea1fae5df42818e4ca233358a1726157824ead67f2469ebbf47c13be.png)  

保存到TEST1工区下面的station文件夹下面，命名为station.txt
![图 16](../images/2b7929314568c7934a3c34e0fc60171b010692dc2e427f9b6309b97cfd486ec0.png)  

* 下载地震数据到TEST1工区

点击分段存储

![图 17](../images/8035385af1e04af519cbc7562ea7094b35de2b74141efb6fc95d642e4fadcd7b.png)  

点击加载坐标文件，将刚才保存到TEST1 station下面的station.txt加载进来

![图 18](../images/218e50c593c52d276cc2946410b9ae5b665ebcd3d5cb39eb646ce49723c80200.png)  

分段时长一般设置为60s

![图 19](../images/4f5cd0348ed2eb1b17d1f58b5a4e2bc30dadbc3419c427f32dc02ff213084657.png)  


之后点击开始， 等一下可以看到TEST1工区下面的Monitor/seg目录下面有segy文件
![图 20](../images/5a85e9269c93c8b8b8988b6d144555b7d9cfdd2e38182d6ff15fad36cae4fd79.png)  


## 监测参数设置

* 准备好一个速度模型文件，放任意位置，这里就放在TEST1工区

![图 21](../images/1ea4eb4708410f85e54e4d15743f69bbdcbe484424ae13903a96280035e8b08c.png)  

* 点击参数设置，运行前需要配置参数

![图 22](../images/621211e1fe0fd17839514dfc893deca3540cb06c9cca80eff679b17022af4814.png)  

* 导入台站坐标文件 station.txt，模式选择WGS84

![图 23](../images/89e1343af533972456c9ad2c4e4a5b7dabe4555c19b6e27b816dbd167cd4fc26.png) 

加载TEST1下面station目录下面的station.txt文件

![图 24](../images/14aa5ada4d90b823f11114a0d52b3dea303714e96997b13ffe0f9df89a550684.png)  

* 调整网格参数，自行计算，这里选用白鹤滩台站

调整的参数如下，然后刷新网格边界，点击确定

![图 25](../images/c11c9e7d507be5984136ab5bae3530ff2e7715c55d2d9eaf45f224cd832c52a7.png)  


* 导入速度模型文件

使用刚才准备的速度模型文件，导入，点击确定
![图 26](../images/cfe02d37d783ee6d99b01c33491fa68a888d1138b77e4fe80af869de44eed7ee.png)  

![图 27](../images/f6d871e4466afe98fd2f862059ac65a5e1c525607f5e4c82eec22242b6df1606.png)  


* 考虑震相拾取精度问题，设置预处理参数
![图 29](../images/31d9d239a9785ab1e5fa697e56af418cf8596af5380f45112256af0a2138fbe6.png)  

* 加载julia.exe

![图 30](../images/e45b301ebcf47b7ab91730b589e9c6d987ef21d52ef089f1ee5b2b1fb42bd9be.png)  

![图 31](../images/c644c3a44998676ccef1a0bd617701217ef91e790746de29e9e8f0d523c1b97d.png)  

![图 32](../images/c617cbf2c363d72112cf0dcf871a0a31fdc947b721a89e41d1c30828c825538e.png)  


点击确定

## 启动监测

点击工具栏检测数据按钮，系统开始处理数据，每当有新的数据下载下来，实时波形会自动更新

![图 33](../images/f0af8392e117b2f0d69119b30d3df67d58df99216737694629b8b7dc4dffa890.png)  



