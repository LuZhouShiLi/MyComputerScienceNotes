<html>
<head>
  <title>网络附件</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="937"/>
<h1>网络附件</h1>

<div>
<span><div><h1><span style="font-size: 22pt; color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold;">附录</span><span style="font-size: 22pt; color: rgb(1, 1, 1); font-family: &quot;Times New Roman&quot;; font-weight: bold;">A</span><span style="font-size: 22pt; color: rgb(1, 1, 1); font-family: 宋体; font-weight: bold;">（报头介绍）</span></h1><h2><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: Arial; font-weight: bold;">UDP</span><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: 黑体; font-weight: bold;">报头</span></h2><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 131pt;"><span style="text-indent: -11mm; min-height: 131pt; font-size: 16pt; color: rgb(0, 32, 96); font-family: ΢���ź�;"> </span><img src="网络附件_files/Image.png" type="image/png" data-filename="Image.png" width="640"/></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 21pt;"></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: -11mm; min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: 宋体;">源端口号：发送方端口号</span></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: -11mm; min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: 宋体;">目的端口号：接收方端口号</span></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: -11mm; min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: 宋体;">长度：UDP用户数据报的长度，最小值是8（仅有首部）</span></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: -11mm; min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: 宋体;">校验和：检测UDP用户数据报在传输中是否有错，有错就丢弃</span></div><div style="margin-left: 11mm; margin-right: 0mm; text-indent: -11mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 21pt;"></div><h2><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: Arial; font-weight: bold;">TCP</span><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: 黑体; font-weight: bold;">报头</span></h2><div style="min-height: 204pt;"><img src="网络附件_files/Image [1].png" type="image/png" data-filename="Image.png" width="877"/><span style="min-height: 204pt; font-size: 16pt; color: rgb(0, 32, 96); font-family: 微软雅黑;">    </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">1.源端口号：发送方端口号</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">2.目的端口号：接收方端口号</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">3.序列号：本报文段的数据的第一个字节的序号</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">4.确认序号：期望收到对方下一个报文段的第一个数据字节的序号</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">5.首部长度（数据偏移）：TCP报文段的数据起始处距离TCP报文段的起始处有多远，即首部长度。单位：32位，即以4字节为计算单位。</span></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">6.保留：占6位，保留为今后使用，目前应置为0</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">7.紧急URG: 此位置1，表明紧急指针字段有效，它告诉系统此报文段中有紧急数据，应尽快传送</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">8.确认ACK: 仅当ACK=1时确认号字段才有效，TCP规定，在连接建立后所有传达的报文段都必须把ACK置1</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">9.推送PSH：当两个应用进程进行交互式的通信时，有时在一端的应用进程希望在键入一个命令后立即就能够收到对方的响应。在这种情况下，TCP就可以使用推送（push）操作，这时，发送方TCP把PSH置1，并立即创建一个报文段发送出去，接收方收到PSH=1的报文段，就尽快地（即“推送”向前）交付给接收应用进程，而不再等到整个缓存都填满后再向上交付</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">10.复位RST: 用于复位相应的TCP连接</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">11.同步SYN: 仅在三次握手建立TCP连接时有效。当SYN=1而ACK=0时，表明这是一个连接请求报文段，对方若同意建立连接，则应在相应的报文段中使用SYN=1和ACK=1.因此，SYN置1就表示这是一个连接请求或连接接受报文</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">12.终止FIN：用来释放一个连接。当FIN=1时，表明此报文段的发送方的数据已经发送完毕，并要求释放运输连接。</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">13.窗口：指发送本报文段的一方的接收窗口（而不是自己的发送窗口）</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">14.校验和：校验和字段检验的范围包括首部和数据两部分，在计算校验和时需要加上12字节的伪头部</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">15.紧急指针：仅在URG=1时才有意义，它指出本报文段中的紧急数据的字节数（紧急数据结束后就是普通数据），即指出了紧急数据的末尾在报文中的位置，注意：即使窗口为零时也可发送紧急数据</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">16.选项：长度可变，最长可达40字节，当没有使用选项时，TCP首部长度是20字节</span></div><div style="min-height: 21pt;"></div><h2><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: Arial; font-weight: bold;">IP</span><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: 黑体; font-weight: bold;">报头</span></h2><div style="min-height: 218pt;"><img src="网络附件_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-family: ����; color: rgb(1, 1, 1);" width="879"/></div><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">版本：IP协议的版本。通信双方使用过的IP协议的版本必须一致，目前最广泛使用的IP协议版本号为4（即IPv4 )</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">首部长度：单位是32位（4字节）</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">服务类型：一般不适用，取值为0</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">总长度：指首部加上数据的总长度，单位为字节</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">标识（identification）：IP软件在存储器中维持一个计数器，每产生一个数据报，计数器就加1，并将此值赋给标识字段</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">标志（flag）：目前只有两位有意义。</span></li></ol><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt; list-style-type: disc;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">标志字段中的最低位记为MF。MF=1即表示后面“还有分片”的数据报。MF=0表示这已是若干数据报片中的最后一个。</span></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">标志字段中间的一位记为DF，意思是“不能分片”，只有当DF=0时才允许分片</span></li></ul><ol start="7" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">片偏移：指出较长的分组在分片后，某片在源分组中的相对位置，也就是说，相对于用户数据段的起点，该片从何处开始。片偏移以8字节为偏移单位。</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">生存时间：TTL，表明是数据报在网络中的寿命，即为“跳数限制”，由发出数据报的源点设置这个字段。路由器在转发数据之前就把TTL值减一，当TTL值减为零时，就丢弃这个数据报。</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">协议：指出此数据报携带的数据时使用何种协议，以便使目的主机的IP层知道应将数据部分上交给哪个处理过程，常用的ICMP(1),IGMP(2),TCP(6),UDP(17),IPv6（41）</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">首部校验和：只校验数据报的首部，不包括数据部分。</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">源地址：发送方IP地址</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">目的地址：接收方IP地址</span></li></ol><div style="min-height: 21pt;"></div><h2><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: Arial; font-weight: bold;">MAC</span><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: 黑体; font-weight: bold;">头部</span></h2><div style="min-height: 183pt;"><img src="网络附件_files/Image [3].png" type="image/png" data-filename="Image.png" style="font-family: ����; color: rgb(1, 1, 1);" width="874"/><span style="min-height: 183pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">1.CRC、PAD 在组包时可以忽略</span></div><div style="min-height: 21pt;"></div><h2><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: Arial; font-weight: bold;">ARP</span><span style="font-size: 16pt; color: rgb(1, 1, 1); font-family: 黑体; font-weight: bold;">头部</span></h2><div style="min-height: 114pt;"><img src="网络附件_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-family: ����; color: rgb(1, 1, 1);" width="906"/><span style="min-height: 114pt; font-size: 12pt; color: rgb(0, 32, 96); font-family: ����;">1</span><span style="min-height: 114pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">.Dest MAC:目的MAC地址</span></div><ol start="2" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">Src MAC：源MAC地址</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">帧类型：0x0806</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">硬件类型：1（以太网）</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">协议类型：0x0800（IP地址）</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">硬件地址长度：6</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">协议地址长度：4</span></li><li style="margin-left: 15pt; margin-right: 0pt; text-indent: 0pt; font-size: 12pt;"><br/><span style="min-height: 15pt; font-size: 12pt; color: rgb(1, 1, 1); font-family: ����;">OP：1（ARP请求），2（ARP应答），3（RARP请求），4（RARP应答）</span></li></ol><div style="margin: 5.98mm 0mm 5.8mm; text-indent: 0mm;"><div><br style="font-family: ����; color: rgb(1, 1, 1);"/></div></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;">INET_ADDRSTRLEN  宏的值 16</div><div style="min-height: 12pt;"><div><span style="font-size: 28pt; color: rgb(0, 0, 153); font-family: 楷体_GB2312;">INADDR_ANY</span> <span style="font-size: 28pt; color: rgb(0, 0, 153); font-family: 楷体_GB2312;">通配地址</span><span style="font-size: 28pt; color: rgb(0, 0, 153); font-family: 楷体_GB2312;">,</span><span style="font-size: 28pt; color: rgb(0, 0, 153); font-family: 楷体_GB2312;">值为</span><span style="font-size: 28pt; color: rgb(0, 0, 153); font-family: 楷体_GB2312;">0</span></div></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;"><br/></div><div style="min-height: 12pt;"></div><div style="min-height: 12pt;"><br/></div></div></span>
</div></body></html> 