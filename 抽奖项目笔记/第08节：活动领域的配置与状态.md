# 第08节：活动领域的配置与状态

## 项目概述

* 开发活动领域部分功能，包括：活动创建、活动状态变更
* domain领域层下面添加activity为主，并且在对应的servce中添加deploy(部署活动)、parttake(领取活动，待开发)、stateflow(状态流转)
* 调整仓储服务实现到基础层
* 按照DDD模型，调整包引用。lottery-infrastructure引入lottery-domain,调整之后domain定义仓储接口，基础层infrastructure实现仓储接口
* 活动领域层需要提供的功能包括：活动创建、活动状态处理和用户领取活动操作
* 活动创建的操作主要会用到事务，因为活动系统提供给运营后台创建活动的时候，需要包括活动信息，奖品信息，策略信息，策略明细以及其他额外扩展的内容
* 活动状态的审核【1编辑 2提审 3撤审 4 通过 5 运行 6拒绝 7关闭 8开启】这里需要用到设计模式的状态模式进行处理


## 设计模式-状态模式


**台灯按钮**

* 我们经常会看到只有一个按钮的台灯，但是可以通过按钮调节亮度，大概是如下一个循环 “关 -> 弱光 -> 亮 -> 强光 -> 关”，那么每次按按钮后，要跳转到什么状态，其实和当前状态有关。我们可以用 if else 解决这个问题，也可以用状态模式解决。
用状态模式解决，就是将这四个状态封装为四个类，每个类都执行按下按钮后要跳转到的状态，这样未来新增一种模式，只要改变部分类即可。

